<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="styles/permissions.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@500&display=swap"
      rel="stylesheet"
    />
    <meta charset="UTF-8" />
    <title>iMessage Tracker</title>
  </head>
  <body>
    <h1>But first we need some permissions</h1>
    <button onclick="diskAccess()" id="permissionButton">
      Provide Disk Access
    </button>
    <button
      onclick="nextPage()"
      id="continueButton"
    >
      Continue
    </button>
    <div id="gradient"></div>

    <script>
      // let res = await fetch(
      //     "/Users/vivekisukapalli/Library/Messages/chat.db"
      // );
      const { ipcRenderer } = require("electron");
      function nextPage() {
        document.location.href = "mostCommon.html";
      }
      function diskAccess() {
        const continueButton = document.getElementById("continueButton");
        continueButton.style.visibility = "visible";
        const permissionButton = document.getElementById("permissionButton");
        // permissionButton.style.visibility = "hidden";
        const { ipcRenderer } = require("electron");
        ipcRenderer.send("request-disk-access");
      }
    </script>
  </body>
</html>
